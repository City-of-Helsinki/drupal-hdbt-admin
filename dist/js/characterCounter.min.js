!function(){"use strict";((Drupal,e)=>{Drupal.behaviors.characterCounter={attach:function(t){const r=e("character-counter","[data-character-counter]",t);0!==r.length&&r.forEach((e=>{const r=e.dataset.characterCounter,n=e.dataset.counterInputTag,a=e.dataset.counterTotal,c=e.dataset.counterStep,o=e.querySelector(".character-counter__warning"),i=t.querySelector(`.${r}`);if(!i)return;const s=i.querySelector("[data-counter-id]"),l=i.querySelector("[data-warning-id]"),u=i.querySelector(n);if(!u)return;let d=0;"textarea"===n&&i.parentElement.classList.contains("form-item")&&i.parentElement.querySelector(".form-item__description")&&i.parentElement.querySelector(".form-item__description").insertAdjacentElement("afterend",e);const h=e=>{var t,r;r=c,d=(t=e)>=a?2:t>r&&r>0?1:0,s.textContent=((e,t)=>Drupal.t("Characters: @counted/@total",{"@counted":e,"@total":t},{context:"Character counter"}))(e,a),l.textContent=((e,t,r,n,a)=>2===e?(a.classList.remove("is-hidden"),"input"===n?Drupal.t("The recommended maximum length for the title is @total characters.",{"@total":r},{context:"Character counter"}):Drupal.t("The recommended maximum length for the lead is @total characters.",{"@total":r},{context:"Character counter"})):1===e?(a.classList.remove("is-hidden"),Drupal.t("Consider shortening. A lead under @step characters works best for search engines.",{"@step":t},{context:"Character counter"})):(a.classList.add("is-hidden"),0))(d,c,a,n,o)};u.value.length>0&&h(u.value.length),"input"===n?u.addEventListener("input",(function(){h(u.value.length)})):setTimeout((function(){const e=u.parentElement.querySelector(".ck-editor__editable");if(e&&e.ckeditorInstance){const t=e.ckeditorInstance;t.model.document.on("change:data",(()=>{h(t.getData().replace(/<[^>]*>/g," ").replace(/\s+/g," ").replace(/&#?[a-z0-9]+;/i," ").trim().length)}))}else u.addEventListener("input",(function(){h(u.value.length)}))}))}))}}})(Drupal,once)}();